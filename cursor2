delimiter //

CREATE PROCEDURE total(INOUT namelist varchar(4000))
BEGIN
	declare a varchar(25) default "";
	set namelist = "";
	declare j integer default 1;
	declare s cursor for select fname from User ;
	declare continue handler for not found set j=0;
	
	open s;
	fetch s into a;
	
	while j=1 do

		set total_amt=total_amt + a;
		fetch s into a;
		SET namelist=CONCAT(a,";",namelist);	
	end while;

	

	close s;	
	
END;

//

